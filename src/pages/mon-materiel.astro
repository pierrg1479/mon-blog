---
import BaseHead from '../components/BaseHead.astro';
import EquipmentTable from '../components/EquipmentTable.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';

type Equipment = {
	name: string;
	image: string;
	protocol: string;
	integration: string;
	price: string;
	rating: number;
	comment: string;
	affiliateLink: string | null;
	articleUrl: string | null;
};

const lastUpdated = '1 janvier 2025';

const placeholderImage = '/images/equipment/placeholder-400.svg';
const structuredPlaceholderImage = '/images/equipment/placeholder-1200.svg';
const siteUrl = 'https://www.the-optimization-guy.com';

const structuredProducts = [
	{
		name: 'Caméra Reolink E1 Pro',
		image: structuredPlaceholderImage,
		description: 'Vue claire de nuit, parfaite pour l’intérieur.',
		url: 'https://domadoo.fr/reolink-e1-pro?ref=the-optimization-guy',
		brand: 'Reolink',
		price: '59.00',
	},
	{
		name: 'Serrure Nuki Smart Lock',
		image: structuredPlaceholderImage,
		description: 'Accès sans clé avec scénarios Home Assistant.',
		url: 'https://domadoo.fr/nuki-smart-lock?ref=the-optimization-guy',
		brand: 'Nuki',
		price: '219.00',
	},
	{
		name: 'Aqara Water Leak Sensor',
		image: structuredPlaceholderImage,
		description: 'Rapide à détecter, mini format discret.',
		url: 'https://domadoo.fr/aqara-water-leak?ref=the-optimization-guy',
		brand: 'Aqara',
		price: '21.00',
	},
	{
		name: 'Shelly Flood',
		image: structuredPlaceholderImage,
		description: 'WiFi direct, bon en dépannage.',
		url: 'https://domadoo.fr/shelly-flood?ref=the-optimization-guy',
		brand: 'Shelly',
		price: '34.00',
	},
	{
		name: 'Aqara Temperature & Humidity',
		image: structuredPlaceholderImage,
		description: 'Capteur fiable pour les pièces clés.',
		url: 'https://domadoo.fr/aqara-temp-humidity?ref=the-optimization-guy',
		brand: 'Aqara',
		price: '15.00',
	},
	{
		name: 'Sonoff SNZB-04 Contact',
		image: structuredPlaceholderImage,
		description: 'Parfait pour portes et fenêtres.',
		url: 'https://domadoo.fr/sonoff-snzb-04?ref=the-optimization-guy',
		brand: 'Sonoff',
		price: '11.00',
	},
	{
		name: 'Tado V3+ Thermostat',
		image: structuredPlaceholderImage,
		description: 'Le meilleur thermostat connecté, ROI rapide.',
		url: 'https://domadoo.fr/tado-v3?ref=the-optimization-guy',
		brand: 'tado°',
		price: '129.00',
	},
	{
		name: 'Têtes thermostatiques Tado',
		image: structuredPlaceholderImage,
		description: 'Granularité pièce par pièce, top en hiver.',
		url: 'https://domadoo.fr/tete-tado?ref=the-optimization-guy',
		brand: 'tado°',
		price: '79.00',
	},
	{
		name: 'Roborock S8',
		image: structuredPlaceholderImage,
		description: 'Aspiration puissante et cartographie fiable.',
		url: 'https://domadoo.fr/roborock-s8?ref=the-optimization-guy',
		brand: 'Roborock',
		price: '599.00',
	},
	{
		name: 'Switchbot Bot',
		image: structuredPlaceholderImage,
		description: 'Pratique pour automatiser un bouton existant.',
		url: 'https://domadoo.fr/switchbot-bot?ref=the-optimization-guy',
		brand: 'SwitchBot',
		price: '29.00',
	},
	{
		name: 'Chromecast 4K',
		image: structuredPlaceholderImage,
		description: 'Streaming fluide, facile à piloter.',
		url: 'https://domadoo.fr/chromecast-4k?ref=the-optimization-guy',
		brand: 'Google',
		price: '69.00',
	},
	{
		name: 'Amplificateur Sonos Amp',
		image: structuredPlaceholderImage,
		description: 'Multiroom robuste pour les pièces ouvertes.',
		url: 'https://domadoo.fr/sonos-amp?ref=the-optimization-guy',
		brand: 'Sonos',
		price: '699.00',
	},
	{
		name: 'Interrupteur Aqara H1',
		image: structuredPlaceholderImage,
		description: 'Look propre, intégration HA immédiate.',
		url: 'https://domadoo.fr/aqara-h1?ref=the-optimization-guy',
		brand: 'Aqara',
		price: '29.00',
	},
	{
		name: 'Ampoule Philips Hue White',
		image: structuredPlaceholderImage,
		description: 'Lumière douce et stable, idéale le soir.',
		url: 'https://domadoo.fr/hue-white?ref=the-optimization-guy',
		brand: 'Philips Hue',
		price: '19.00',
	},
	{
		name: 'Ikea Shortcut Button',
		image: structuredPlaceholderImage,
		description: 'Bouton simple pour scènes rapides.',
		url: 'https://domadoo.fr/ikea-shortcut?ref=the-optimization-guy',
		brand: 'IKEA',
		price: '9.00',
	},
	{
		name: 'Aqara Wireless Mini Switch',
		image: structuredPlaceholderImage,
		description: 'Compact et très réactif.',
		url: 'https://domadoo.fr/aqara-mini-switch?ref=the-optimization-guy',
		brand: 'Aqara',
		price: '12.00',
	},
	{
		name: 'ConBee II Zigbee USB',
		image: structuredPlaceholderImage,
		description: 'Stable, reconnu par Zigbee2MQTT.',
		url: 'https://domadoo.fr/conbee-2?ref=the-optimization-guy',
		brand: 'dresden elektronik',
		price: '39.00',
	},
	{
		name: 'Mini PC Home Assistant',
		image: structuredPlaceholderImage,
		description: 'Le cœur du système, silencieux et fiable.',
		url: 'https://www.home-assistant.io/installation/',
		brand: 'Home Assistant',
		price: '199.00',
	},
];

const structuredData = {
	'@context': 'https://schema.org',
	'@type': 'CollectionPage',
	name: 'Mon matériel – The Optimization Guy',
	url: `${siteUrl}/mon-materiel/`,
	description:
		'Découvrez tout le matériel recommandé par The Optimization Guy : équipements, outils et accessoires utilisés au quotidien.',
	mainEntity: structuredProducts.map((product) => ({
		'@type': 'Product',
		name: product.name,
		image: product.image.startsWith('http') ? product.image : `${siteUrl}${product.image}`,
		description: product.description,
		url: product.url,
		brand: {
			'@type': 'Brand',
			name: product.brand,
		},
		offers: {
			'@type': 'Offer',
			url: product.url,
			priceCurrency: 'EUR',
			price: product.price,
			availability: 'https://schema.org/InStock',
			itemCondition: 'https://schema.org/NewCondition',
		},
	})),
};

const security: Equipment[] = [
	{
		name: 'Reolink Argus 4 Pro',
		image: placeholderImage,
		protocol: 'WiFi',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Caméra de sécurité.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Tapo C225',
		image: placeholderImage,
		protocol: 'WiFi',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Caméra de sécurité.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Reolink Lumus Pro',
		image: placeholderImage,
		protocol: 'WiFi',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Caméra de sécurité.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Tapo C510W',
		image: placeholderImage,
		protocol: 'WiFi',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Caméra de sécurité.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Reolink Argus 3 Ultra',
		image: placeholderImage,
		protocol: 'WiFi',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Caméra de sécurité.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Tapo C425',
		image: placeholderImage,
		protocol: 'WiFi',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Caméra de sécurité.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Serrure SwitchBot Smart Lock Ultra',
		image: placeholderImage,
		protocol: 'WiFi',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Serrure connectée.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'SwitchBot Keypad Vision',
		image: placeholderImage,
		protocol: 'Bluetooth',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Clavier de serrure.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'SwitchBot Keypad Touch',
		image: placeholderImage,
		protocol: 'Bluetooth',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Clavier tactile.',
		affiliateLink: null,
		articleUrl: null,
	},
];

const sensors: Equipment[] = [
	{
		name: "Capteur d'ouverture Sonoff SNZB-04P",
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: "Capteur d'ouverture.",
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: "Capteur d'ouverture Tapo T110",
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: "Capteur d'ouverture.",
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Détecteur de mouvement Sonoff SNZB-03P',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Détecteur de mouvement.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Détecteur de présence Sonoff SNZB-06P',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Détecteur de présence.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Capteur de pluie SNZB-05',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Capteur de pluie.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Capteur de fuite Sonoff SNZB-05P',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Capteur de fuite.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Capteur de vibration Third Reality 3RVS01031Z',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Capteur de vibration.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Capteur de température Sonoff SNZB-02LD',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Capteur de température.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Capteur de fuite Tapo T300',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Capteur de fuite.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Capteur de température et humidité Tapo T310',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Capteur de température et humidité.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Capteur de température et humidité Tapo T315',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Capteur de température et humidité.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Capteur de luminosité TS0222',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Capteur de luminosité.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Détecteur de fumée Heiman',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Détecteur de fumée.',
		affiliateLink: null,
		articleUrl: null,
	},
];

const heating: Equipment[] = [
	{
		name: 'Tado V3+ Thermostat',
		image: '/images/tado-termostat-v3+.jpg',
		protocol: 'WiFi',
		integration: 'Oui',
		price: '129€',
		rating: 5,
		comment: 'Le meilleur thermostat connecté, ROI rapide.',
		affiliateLink: 'https://domadoo.fr/tado-v3?ref=the-optimization-guy',
		articleUrl: '/blog/test-tado-v3',
	},
	{
		name: 'Têtes thermostatiques Tado',
		image: '/images/tete-tado-thermostatique (1).jpg',
		protocol: 'WiFi',
		integration: 'Oui',
		price: '79€/pièce',
		rating: 5,
		comment: 'Granularité pièce par pièce, top en hiver.',
		affiliateLink: 'https://domadoo.fr/tete-tado?ref=the-optimization-guy',
		articleUrl: '/blog/tetes-thermostatiques-tado',
	},
	{
		name: 'Module fil pilote Nodon SIN-4-FP-21',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Module fil pilote.',
		affiliateLink: null,
		articleUrl: null,
	},
];

const cleaning: Equipment[] = [
	{
		name: 'Robot Tondeuse Dream A1',
		image: placeholderImage,
		protocol: 'WiFi',
		integration: 'Moyenne',
		price: '—',
		rating: 4,
		comment: 'Robot tondeuse.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Robot aspirateur Dream X50 Master',
		image: placeholderImage,
		protocol: 'WiFi',
		integration: 'Moyenne',
		price: '—',
		rating: 4,
		comment: 'Robot aspirateur.',
		affiliateLink: null,
		articleUrl: null,
	},
];

const multimedia: Equipment[] = [
	{
		name: 'Ampli Nad C700',
		image: placeholderImage,
		protocol: 'WiFi',
		integration: 'Moyenne',
		price: '—',
		rating: 4,
		comment: 'Ampli connecté.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Xiaomi TV Box S 3ème Génération',
		image: placeholderImage,
		protocol: 'WiFi',
		integration: 'Moyenne',
		price: '—',
		rating: 4,
		comment: 'Box multimédia.',
		affiliateLink: null,
		articleUrl: null,
	},
];

const switchesAndLights: Equipment[] = [
	{
		name: 'Prise Tapo P110',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Prise connectée.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Prise Tapo P110M',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Prise connectée.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Prise Sonoff S60ZBTPF',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Prise connectée.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Interrupteur Tapo S210',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Interrupteur connecté.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Interrupteur Tapo S220',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Interrupteur connecté.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Interrupteur Sonoff ZBM5-1C-80/86',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Interrupteur connecté.',
		affiliateLink: null,
		articleUrl: null,
	},
];

const buttons: Equipment[] = [
	{
		name: 'Bot Switchbot',
		image: placeholderImage,
		protocol: 'Bluetooth',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Bot connecté.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Fingerbot TS0001',
		image: placeholderImage,
		protocol: 'Bluetooth',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Fingerbot.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Bouton Tapo S200D',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Bouton connecté.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Bouton Sonoff SNZB-01P',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Bouton connecté.',
		affiliateLink: null,
		articleUrl: null,
	},
];

const infrastructure: Equipment[] = [
	{
		name: 'Répéteur Zigbee Aeotec',
		image: placeholderImage,
		protocol: 'Zigbee',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Répéteur Zigbee.',
		affiliateLink: null,
		articleUrl: null,
	},
	{
		name: 'Home Assistant Green',
		image: placeholderImage,
		protocol: '-',
		integration: 'Oui',
		price: '—',
		rating: 4,
		comment: 'Box Home Assistant.',
		affiliateLink: null,
		articleUrl: null,
	},
];

const sections = [
	{ title: 'Sécurité', items: security },
	{ title: 'Capteurs', items: sensors },
	{ title: 'Chauffage', items: heating },
	{ title: 'Ménage et entretien', items: cleaning },
	{ title: 'Multimédia', items: multimedia },
	{ title: 'Prise et interrupteur', items: switchesAndLights },
	{ title: 'Boutons et Fingerbot', items: buttons },
	{ title: 'Infrastructure', items: infrastructure },
];
---

<!doctype html>
<html lang="fr">
	<head>
		<!-- Google Tag Manager -->
		<script is:inline>
			(function (w, d, s, l, i) {
				w[l] = w[l] || [];
				w[l].push({
					'gtm.start': new Date().getTime(),
					event: 'gtm.js',
				});
				const f = d.getElementsByTagName(s)[0];
				const j = d.createElement(s);
				const dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore(j, f);
			})(window, document, 'script', 'dataLayer', 'GTM-PTBBTWQV');
		</script>
		<!-- End Google Tag Manager -->
		<BaseHead
			title="Mon matériel domotique Home Assistant - The Optimization Guy"
			description="Liste complète du matériel domotique que j'utilise au quotidien : caméras, capteurs, chauffage connecté, et mes recommandations."
		/>
		<script type="application/ld+json" set:html={JSON.stringify(structuredData)}></script>
	</head>
	<body>
		<!-- Google Tag Manager (noscript) -->
		<noscript
			><iframe
				src="https://www.googletagmanager.com/ns.html?id=GTM-PTBBTWQV"
				height="0"
				width="0"
				style="display:none;visibility:hidden"></iframe
		></noscript>
		<!-- End Google Tag Manager (noscript) -->
		<Header />
		<main class="equipment-main">
			<article class="equipment-page">
				<header class="page-header">
					<h1>Mon matériel</h1>
					<p class="last-updated">Dernière mise à jour : {lastUpdated}</p>
					<p class="intro">
						Voici la liste complète du matériel domotique que j'utilise chez moi avec Home Assistant.
						Tout ce qui est listé ici est réellement installé et testé, avec mes retours courts et directs.
					</p>
				</header>

				{sections.map((section) => (
					<section class="equipment-section">
						<h2>{section.title}</h2>
						<p class="section-intro">
							Une sélection de produits testés au quotidien pour cette catégorie.
						</p>
						<EquipmentTable equipment={section.items} />
					</section>
				))}
			</article>
		</main>
		<Footer />
	</body>
</html>

<style>
	.equipment-main {
		width: calc(100% - 2em);
		max-width: 1200px;
		margin: 0 auto;
		padding: 3em 1em 4em;
	}

	.equipment-page {
		display: flex;
		flex-direction: column;
		gap: 3rem;
	}

	.page-header {
		text-align: left;
		max-width: 820px;
	}

	.page-header h1 {
		font-size: 2.5rem;
		margin-bottom: 0.5rem;
	}

	.last-updated {
		font-size: 0.95rem;
		color: #6b7280;
	}

	:global(.dark) .last-updated {
		color: #9ca3af;
	}

	.intro {
		margin-top: 1rem;
		color: #374151;
		font-size: 1.05rem;
	}

	:global(.dark) .intro {
		color: #d1d5db;
	}

	.equipment-section {
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}

	.section-intro {
		margin: 0;
		color: rgb(var(--gray));
		font-size: 1rem;
	}

	:global(.dark) .section-intro {
		color: rgb(var(--gray));
	}

	.equipment-section h2 {
		font-size: 1.8rem;
		margin-bottom: 0.25rem;
	}

	@media (max-width: 768px) {
		.page-header h1 {
			font-size: 2rem;
		}
		.equipment-section h2 {
			font-size: 1.5rem;
		}
	}
</style>
